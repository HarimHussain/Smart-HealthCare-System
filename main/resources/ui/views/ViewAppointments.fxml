<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.collections.FXCollections?>

<?import java.lang.String?>
<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="ui.controllers.ViewAppointmentsController"
      styleClass="form-container full-width"
      spacing="24">

    <VBox spacing="8">
        <Label text="My Appointments"
               style="-fx-font-size: 24px; -fx-font-weight: bold;"/>
        <Label text="View and manage your scheduled appointments"
               styleClass="text-muted"/>
    </VBox>

    <!-- Filter Controls -->
    <VBox styleClass="card" spacing="16">
        <Label text="Filter Options" styleClass="card-title"/>
        <GridPane hgap="15" vgap="15">
            <columnConstraints>
                <ColumnConstraints percentWidth="25"/>
                <ColumnConstraints percentWidth="25"/>
                <ColumnConstraints percentWidth="50"/>
            </columnConstraints>

            <Label text="Status:" styleClass="form-label" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
            <ComboBox fx:id="statusFilter" styleClass="form-control" GridPane.rowIndex="0" GridPane.columnIndex="1">
                <items>
                    <FXCollections fx:factory="observableArrayList">
                        <String fx:value="All"/>
                        <String fx:value="Pending"/>
                        <String fx:value="Confirmed"/>
                        <String fx:value="Cancelled"/>
                    </FXCollections>
                </items>
            </ComboBox>

            <Label text="Date:" styleClass="form-label" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
            <DatePicker fx:id="dateFilter" styleClass="form-control" GridPane.rowIndex="0" GridPane.columnIndex="3"/>
        </GridPane>

        <HBox spacing="12">
            <Button text="Apply Filter" onAction="#handleFilter" styleClass="btn-primary"/>
            <Button text="Clear Filter" onAction="#handleClearFilter" styleClass="btn-secondary"/>
            <HBox HBox.hgrow="ALWAYS"/>
            <Button text="Export Report" onAction="#handleExport" styleClass="btn-success"/>
        </HBox>
    </VBox>

    <!-- Appointments Table -->
    <VBox styleClass="card" spacing="16" VBox.vgrow="ALWAYS">
        <HBox alignment="CENTER_LEFT" spacing="12">
            <Label text="Appointments List" styleClass="card-title"/>
            <HBox HBox.hgrow="ALWAYS"/>
            <Button text="Refresh" onAction="#handleRefresh" styleClass="btn-secondary"/>
        </HBox>

        <TableView fx:id="appointmentsTable" styleClass="responsive-table">
            <columns>
                <TableColumn text="Date" minWidth="100" prefWidth="120">
                    <cellValueFactory>
                        <PropertyValueFactory property="date"/>
                    </cellValueFactory>
                </TableColumn>
                <TableColumn text="Time" minWidth="80" prefWidth="100">
                    <cellValueFactory>
                        <PropertyValueFactory property="time"/>
                    </cellValueFactory>
                </TableColumn>
                <TableColumn text="Doctor" minWidth="150" prefWidth="200">
                    <cellValueFactory>
                        <PropertyValueFactory property="doctor"/>
                    </cellValueFactory>
                </TableColumn>
                <TableColumn text="Specialization" minWidth="120" prefWidth="150">
                    <cellValueFactory>
                        <PropertyValueFactory property="specialization"/>
                    </cellValueFactory>
                </TableColumn>
                <TableColumn text="Condition" minWidth="150" prefWidth="200">
                    <cellValueFactory>
                        <PropertyValueFactory property="condition"/>
                    </cellValueFactory>
                </TableColumn>
                <TableColumn text="Status" minWidth="100" prefWidth="120">
                    <cellValueFactory>
                        <PropertyValueFactory property="status"/>
                    </cellValueFactory>
                </TableColumn>
                <TableColumn text="Actions" minWidth="150" prefWidth="200">
                    <cellValueFactory>
                        <PropertyValueFactory property="actions"/>
                    </cellValueFactory>
                </TableColumn>
            </columns>
        </TableView>
    </VBox>

    <!-- Statistics -->
    <VBox styleClass="card" spacing="16">
        <Label text="Appointment Statistics" styleClass="card-title"/>
        <GridPane hgap="30" vgap="20">
            <columnConstraints>
                <ColumnConstraints percentWidth="25"/>
                <ColumnConstraints percentWidth="25"/>
                <ColumnConstraints percentWidth="25"/>
                <ColumnConstraints percentWidth="25"/>
            </columnConstraints>

            <!-- Total -->
            <VBox alignment="CENTER" GridPane.columnIndex="0">
                <Label text="Total" style="-fx-font-size: 14px; -fx-text-fill: #64748b;"/>
                <Label fx:id="totalLabel" text="0"
                       style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #3b82f6;"/>
            </VBox>

            <!-- Pending -->
            <VBox alignment="CENTER" GridPane.columnIndex="1">
                <Label text="Pending" style="-fx-font-size: 14px; -fx-text-fill: #64748b;"/>
                <Label fx:id="pendingLabel" text="0"
                       style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #f59e0b;"/>
            </VBox>

            <!-- Confirmed -->
            <VBox alignment="CENTER" GridPane.columnIndex="2">
                <Label text="Confirmed" style="-fx-font-size: 14px; -fx-text-fill: #64748b;"/>
                <Label fx:id="confirmedLabel" text="0"
                       style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #10b981;"/>
            </VBox>

            <!-- Cancelled -->
            <VBox alignment="CENTER" GridPane.columnIndex="3">
                <Label text="Cancelled" style="-fx-font-size: 14px; -fx-text-fill: #64748b;"/>
                <Label fx:id="cancelledLabel" text="0"
                       style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #ef4444;"/>
            </VBox>
        </GridPane>
    </VBox>
</VBox>
