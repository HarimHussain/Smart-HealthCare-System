<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import javafx.collections.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.control.cell.*?>
<?import javafx.scene.layout.*?>

<VBox styleClass="form-container full-width" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="ui.controllers.BookAppointmentController">

    <!-- Header -->
    <VBox spacing="8">
        <Label style="-fx-font-size: 24px; -fx-font-weight: bold;" text="Book New Appointment" />
        <Label styleClass="text-muted" text="Schedule a consultation with our healthcare specialists" />
    </VBox>

    <!-- Two Column Layout -->
    <HBox styleClass="two-column-layout" HBox.hgrow="ALWAYS">
        <!-- Left Column - Form -->
        <VBox spacing="24" styleClass="left-column">
            <VBox spacing="24" styleClass="card">
                <Label styleClass="card-title" text="Appointment Details" />

                <VBox spacing="16">
                    <!-- Doctor Selection -->
                    <VBox styleClass="form-group">
                        <Label styleClass="form-label" text="Specialization" />
                        <ComboBox fx:id="specializationComboBox" styleClass="form-control">
                            <items>
                                <FXCollections fx:factory="observableArrayList">
                                    <String fx:value="General Physician" />
                                    <String fx:value="Dentist" />
                                    <String fx:value="Dermatologist" />
                                    <String fx:value="Cardiologist" />
                                    <String fx:value="Pediatrician" />
                                </FXCollections>
                            </items>
                        </ComboBox>
                    </VBox>

                    <!-- Date Selection -->
                    <VBox styleClass="form-group">
                        <Label styleClass="form-label" text="Appointment Date" />
                        <DatePicker fx:id="datePicker" styleClass="form-control" />
                    </VBox>

                    <!-- Time Slot -->
                    <VBox styleClass="form-group">
                        <Label styleClass="form-label" text="Preferred Time" />
                        <GridPane hgap="10" vgap="10">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="50" />
                                <ColumnConstraints percentWidth="50" />
                            </columnConstraints>
                            <rowConstraints>
                                <RowConstraints />
                                <RowConstraints />
                            </rowConstraints>
                            <RadioButton fx:id="timeSlot11AM" text="11:00 AM" userData="11AM" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                            <RadioButton fx:id="timeSlot9AM" text="9:00 AM" userData="9AM" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                            <RadioButton fx:id="timeSlot2PM" text="2:00 PM" userData="2PM" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                            <RadioButton fx:id="timeSlot4PM" text="4:00 PM" userData="4PM" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                        </GridPane>
                    </VBox>

                    <!-- Medical Details -->
                    <VBox styleClass="form-group">
                        <Label styleClass="form-label" text="Medical Condition" />
                        <TextArea fx:id="conditionField" prefRowCount="4" promptText="Describe your symptoms or reason for visit" styleClass="form-control" wrapText="true" />
                    </VBox>
                </VBox>

                <!-- Action Buttons -->
                <VBox spacing="12">
                    <Label fx:id="errorLabel" styleClass="alert-error" text="" visible="false" wrapText="true" />
                    <Label fx:id="successLabel" styleClass="alert-success" text="" visible="false" wrapText="true" />

                    <HBox spacing="12">
                        <Button onAction="#handleBookAppointment" styleClass="btn-success" text="Book Appointment" HBox.hgrow="ALWAYS" />
                        <Button onAction="#handleCancel" styleClass="btn-secondary" text="Clear Form" HBox.hgrow="ALWAYS" />
                    </HBox>
                </VBox>
            </VBox>
        </VBox>

        <!-- Right Column - Doctors List -->
        <VBox spacing="24" styleClass="right-column">
            <VBox spacing="16" styleClass="card" VBox.vgrow="ALWAYS">
                <Label styleClass="card-title" text="Available Doctors" />

                <TableView fx:id="doctorsTable" styleClass="responsive-table">
                    <columns>
                        <TableColumn minWidth="150" prefWidth="200" text="Doctor">
                            <cellValueFactory>
                                <PropertyValueFactory property="name" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn minWidth="120" prefWidth="150" text="Specialization">
                            <cellValueFactory>
                                <PropertyValueFactory property="specialization" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn minWidth="150" prefWidth="250" text="Email">
                            <cellValueFactory>
                                <PropertyValueFactory property="email" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn minWidth="100" prefWidth="120" text="Availability">
                            <cellValueFactory>
                                <PropertyValueFactory property="available" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn minWidth="80" prefWidth="100" text="Action">
                            <cellValueFactory>
                                <PropertyValueFactory property="selectButton" />
                            </cellValueFactory>
                        </TableColumn>
                    </columns>
                </TableView>

                <HBox spacing="12">
                    <TextField fx:id="searchField" promptText="Search doctors..." styleClass="form-control" HBox.hgrow="ALWAYS" />
                    <Button onAction="#handleSearch" styleClass="btn-secondary" text="Search" />
                </HBox>
            </VBox>
        </VBox>
    </HBox>
</VBox>
